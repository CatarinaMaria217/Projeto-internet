<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projecto - organizador de links</title>
    
</head>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: Arial, Helvetica, sans-serif
    }


    .cabeçalho {
        height: 170px;
        background: #002b4c; /* cor de fundo */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #ffffff;
        text-align: center;
        padding: 20px;
    }

    .menu_de_navegação {
        flex: 1;
        background: #3e4b55; /* cor de fundo */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #ffffff;
        text-align: center;
        padding: 20px;
        margin-top: 5px;
    }

    .imagens {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 50px
    }

    .imagens img {
        width: 50px; /* Define tamanho da imagem */
        height: 50px;
        border-radius: 60%; /* Deixa a imagem redonda */
    }

    .imagens img:hover {
        filter: brightness(1.5); /* Clareia a imagem */
        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.8); /* Adiciona um brilho ao redor */
        cursor: pointer;
    }

</style>~

<body>

    <header class="cabeçalho">
        <div class="image-section"></div>
        <div class="text-section">
            <h1>O seu perfil!</h1>
            <p>Usuário: <span id="nome-usuário"></span></p>
        </div>
    </header>

    <nav class="menu_de_navegação">
        <div class= "imagens">
            <a href="home.html">
                <img src="https://cdn-icons-png.flaticon.com/512/25/25694.png" alt="Home">
            </a>
            <a href="defenições.html">
                <img src="https://cdn-icons-png.flaticon.com/512/163/163272.png" alt="defenições">
            </a>
            <a href="index.html">
                <img src="https://www.svgrepo.com/show/314895/sign-out-circle.svg" alt="logout">
            </a>
        </div>
    </nav>

    <div>
        <strong>Foto de Perfil:</strong>
        <input type="file" id="foto-perfil" accept="image/*">
        <br><br>
        <img id="foto-preview" src="" alt="Sua Foto de Perfil" style="max-width: 150px; max-height: 150px; border-radius: 50%; display: none;">
    </div>
    
    <button onclick="salvarFoto()">Salvar Foto</button>

    <script>
        // Verifica se o usuário está logado
        if (localStorage.getItem("userLogged") !== "true") {
            alert("Você precisa fazer login primeiro!");
            window.location.href = "index.html"; // Redireciona para o login
        }

        var username = localStorage.getItem("username");
        document.getElementById("nome-usuário").textContent = username;

        function logout() {
        localStorage.removeItem("userLogged");
        localStorage.removeItem("username");  // Remove o nome de usuário ao deslogar
        window.location.href = "index.html"; // Redireciona para a página de login
        }

        const inputFile = document.getElementById('input-file');
        const fotoHome = document.getElementById('foto-home');

        // Função para carregar a imagem
        function carregarImagem(event) {
            const file = event.target.files[0];  // Pega o arquivo de imagem
            if (file) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    const imagemURL = e.target.result;
                    fotoHome.src = imagemURL;
                    fotoHome.style.display = 'block';  // Exibe a imagem carregada

                    // Armazenando a URL da imagem no localStorage
                    localStorage.setItem('imagemPerfil', imagemURL);
                };

                reader.readAsDataURL(file);  // Converte a imagem para uma URL de dados
            }
        }   

        // Verificar se já existe uma imagem armazenada ao carregar a página
        window.onload = function() {
            const imagemArmazenada = localStorage.getItem('imagemPerfil');
            if (imagemArmazenada) {
                fotoHome.src = imagemArmazenada;
                fotoHome.style.display = 'block';  // Exibe a imagem armazenada
            }
        };

        // Adicionando o evento para o input de arquivo
        inputFile.addEventListener('change', carregarImagem);
    </script>
    

</body>
</html>