<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projecto - organizador de links</title>
    
</head>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: Arial, Helvetica, sans-serif
    }


    .cabeçalho {
        height: 170px;
        background: #002b4c; /* cor de fundo */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #ffffff;
        text-align: center;
        padding: 20px;
    }

    .menu_de_navegação {
        flex: 1;
        background: #3e4b55; /* cor de fundo */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #ffffff;
        text-align: center;
        padding: 20px;
        margin-top: 5px;
    }

    .imagens {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 50px
    }

    .imagens img {
        width: 50px; /* Define tamanho da imagem */
        height: 50px;
        border-radius: 60%; /* Deixa a imagem redonda */
    }

    .imagens img:hover {
        filter: brightness(1.5); /* Clareia a imagem */
        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.8); /* Adiciona um brilho ao redor */
        cursor: pointer;
    }

    .perfil-container {
        margin-top: 70px;
        top: 100px; /* Ajuste conforme a altura do seu cabeçalho */
        left: 20px; /* Ajuste a margem esquerda conforme necessário */
        padding: 10px;
        margin-left: 50px;
    }

    .image-perfil {
        margin: 20px;
        width: 150px; /* Largura fixa do container */
        height: 150px; /* Altura fixa do container */
        border-radius: 50%; /* Torna o container redondo */
        overflow: hidden; /* Garante que a imagem não ultrapasse os limites do container */
        display: flex; /* Para garantir que o conteúdo da imagem fique alinhado */
        justify-content: center; /* Alinha a imagem no centro */
        align-items: center; /* Alinha a imagem no centro */
    }

    .image-perfil img {
        width: 100%; /* A imagem ocupa 100% do tamanho do container */
        height: 100%; /* A imagem ocupa 100% do tamanho do container */
        object-fit: cover; /* Ajusta a imagem para preencher o círculo sem distorcer */
    }

</style>~

<body>

    <header class="cabeçalho">
        <div class="image-section"></div>
        <div class="text-section">
            <h1>O seu perfil!</h1>
            <p>Usuário: <span id="nome-usuário"></span></p>
        </div>
    </header>

    <nav class="menu_de_navegação">
        <div class= "imagens">
            <a href="home.html">
                <img src="https://cdn-icons-png.flaticon.com/512/25/25694.png" alt="Home">
            </a>
            <a href="defenições.html">
                <img src="https://cdn-icons-png.flaticon.com/512/163/163272.png" alt="defenições">
            </a>
            <a href="index.html">
                <img src="https://www.svgrepo.com/show/314895/sign-out-circle.svg" alt="logout">
            </a>
        </div>
    </nav>

    <div class="perfil-container"> 
        <strong>Escolher foto de Perfil:</strong>
        <br><br>
        <input type="file" id="input-file" accept="image/*">
        <br><br>
        <div class="image-perfil">
            <img id="foto-perfil" src="" alt="Sua Foto de Perfil" style="max-width: 150px; max-height: 150px; border-radius: 50%; display: none;">
        </div>
        <label for="novo-nome">Alterar Nome de Usuário:</label>
        <input type="text" id="novo-nome" placeholder="Digite seu nome">
        <button id="salvar-nome">Salvar</button>
        <p>Usuário: <span id="nome-usuario"></span></p>
    </div>
    

    <script>
        // Verifica se o usuário está logado
        if (localStorage.getItem("userLogged") !== "true") {
            alert("Você precisa fazer login primeiro!");
            window.location.href = "index.html"; // Redireciona para o login
        }

        var username = localStorage.getItem("username");
        document.getElementById("nome-usuário").textContent = username;

        function logout() {
        localStorage.removeItem("userLogged");
        localStorage.removeItem("username");  // Remove o nome de usuário ao deslogar
        window.location.href = "index.html"; // Redireciona para a página de login
        }

        const inputFile = document.getElementById('input-file');
        const fotoHome = document.getElementById('foto-perfil');

        // Função para carregar a imagem
        function carregarImagem(event) {
            const file = event.target.files[0];  // Pega o arquivo de imagem
            if (file) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    const imagemURL = e.target.result;
                    fotoHome.src = imagemURL;
                    fotoHome.style.display = 'block';  // Exibe a imagem carregada

                    // Armazenando a URL da imagem no localStorage
                    localStorage.setItem(`imagemPerfil_${username}`, imagemURL);
                };

                reader.readAsDataURL(file);  // Converte a imagem para uma URL de dados
            }
        }   

        // Verificar se já existe uma imagem armazenada ao carregar a página
        window.onload = function() {
            const imagemArmazenada = localStorage.getItem('imagemPerfil_${username}', imagemURL);
            if (imagemArmazenada) {
                fotoHome.src = imagemArmazenada;
                fotoHome.style.display = 'block';  // Exibe a imagem armazenada
            }
        };

        // Adicionando o evento para o input de arquivo
        inputFile.addEventListener('change', carregarImagem);

        var fotoPerfil = localStorage.getItem(`imagemPerfil_${username}`);
        if (fotoPerfil) {
            document.getElementById("foto-perfil").src = fotoPerfil;
            document.getElementById("foto-perfil").style.display = "block"; // Torna a foto visível
        }

        document.addEventListener("DOMContentLoaded", function () {
        const nomeUsuarioSpan = document.getElementById("nome-usuário");
        const nomeInput = document.getElementById("novo-nome");
        const salvarBotao = document.getElementById("salvar-nome");

        // Carregar nome salvo no LocalStorage
        let nomeSalvo = localStorage.getItem("username");
        if (nomeSalvo) {
            nomeUsuarioSpan.textContent = nomeSalvo;
        } else {
            nomeUsuarioSpan.textContent = "Usuário Padrão"; // Nome inicial
        }

        // Evento para salvar novo nome
        salvarBotao.addEventListener("click", function () {
            let novoNome = nomeInput.value.trim();
            if (novoNome !== "") {
                localStorage.setItem("username", novoNome);
                nomeUsuarioSpan.textContent = novoNome;
                alert("Nome atualizado com sucesso!");
                nomeInput.value = ""; // Limpa o campo
            } else {
                alert("Por favor, digite um nome válido!");
            }
        });
    });

    </script>
    

</body>
</html>